---
// Importamos las imágenes optimizadas desde public
const imageFiles = [
  'DSCF9157', 'DSCF9159', 'DSCF9160', 'DSCF9172', 'DSCF9176', 'DSCF9177',
  'DSCF9183', 'DSCF9184', 'DSCF9186', 'DSCF9187', 'DSCF9188', 'DSCF9190',
  'DSCF9194', 'DSCF9196', 'DSCF9198', 'DSCF9200', 'DSCF9202', 'DSCF9203',
  'DSCF9207', 'DSCF9210', 'DSCF9215'
];

// Lista de las imágenes con nombres descriptivos para SEO
const imageDescriptions = [
  'Deliciosos helados naturales de Zona Fría',
  'Variedad de sabores de helados artesanales',
  'Milkshakes cremosos y refrescantes',
  'Frutas frescas de temporada',
  'Panes artesanales para lonch',
  'Ambiente acogedor de Zona Fría',
  'Productos frescos y naturales',
  'Heladería con ingredientes premium',
  'Sabores únicos y naturales',
  'Experiencia gastronómica única',
  'Helados con frutas naturales',
  'Preparación artesanal de productos',
  'Variedad de opciones saludables',
  'Ambiente familiar en Zona Fría',
  'Productos elaborados con amor',
  'Sabores tropicales y exóticos',
  'Calidad premium en cada producto',
  'Frescura garantizada en Zona Fría',
  'Innovación en sabores naturales',
  'Experiencia refrescante única',
  'Lo mejor en heladería natural'
];
---

<div class="carousel-container">
  <div class="splide" id="image-carousel">
    <div class="splide__track">
      <ul class="splide__list">
        {imageFiles.map((imageName, index) => (
          <li class="splide__slide">
            <div class="image-wrapper">
              <picture>
                <source 
                  srcset={`/images/${imageName}.webp`} 
                  type="image/webp"
                >
                <img 
                  src={`/images/${imageName}.jpg`}
                  alt={imageDescriptions[index] || `Producto de Zona Fría ${index + 1}`}
                  loading="lazy"
                  decoding="async"
                  class="carousel-image"
                  width="800"
                  height="600"
                />
              </picture>
              <div class="image-overlay">
                <h3 class="image-title">{imageDescriptions[index] || `Delicia ${index + 1}`}</h3>
              </div>
            </div>
          </li>
        ))}
      </ul>
    </div>
    
    <!-- Controles del carrusel -->
    <div class="splide__arrows">
      <button class="splide__arrow splide__arrow--prev">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button class="splide__arrow splide__arrow--next">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    
    <!-- Indicadores -->
    <ul class="splide__pagination"></ul>
  </div>
</div>

<style>
  .carousel-container {
    margin: 40px 0;
    position: relative;
  }
  
  .splide {
    max-width: 100%;
  }
  
  .image-wrapper {
    position: relative;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
  }
  
  .image-wrapper:hover {
    transform: translateY(-5px);
  }
  
  .carousel-image {
    width: 100%;
    height: 400px;
    object-fit: cover;
    display: block;
  }
  
  .image-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
    padding: 20px;
    color: white;
  }
  
  .image-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
  }
  
  /* Estilos personalizados para Splide */
  .splide__arrow {
    background: var(--neon-green);
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(57, 255, 20, 0.3);
  }
  
  .splide__arrow:hover {
    background: var(--neon-pink);
    box-shadow: 0 4px 15px rgba(255, 7, 58, 0.3);
    transform: scale(1.1);
  }
  
  .splide__arrow:disabled {
    opacity: 0.5;
  }
  
  .splide__pagination__page {
    background: var(--neon-blue);
    border: none;
    border-radius: 50%;
    width: 12px;
    height: 12px;
    margin: 0 5px;
    transition: all 0.3s ease;
  }
  
  .splide__pagination__page.is-active {
    background: var(--neon-pink);
    transform: scale(1.3);
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .carousel-image {
      height: 250px;
    }
    
    .image-title {
      font-size: 1rem;
    }
    
    .splide__arrow {
      width: 40px;
      height: 40px;
    }
  }
</style>

<script>
  import { Splide } from '@splidejs/splide';
  
  document.addEventListener('DOMContentLoaded', function() {
    const splide = new Splide('#image-carousel', {
      type: 'loop',
      perPage: 3,
      perMove: 1,
      gap: '2rem',
      autoplay: true,
      interval: 4000,
      pauseOnHover: true,
      pauseOnFocus: true,
      resetProgress: false,
      arrows: true,
      pagination: true,
      cover: true,
      focus: 'center',
      trimSpace: false,
      breakpoints: {
        768: {
          perPage: 1,
          gap: '1rem',
        },
        1024: {
          perPage: 2,
          gap: '1.5rem',
        },
      },
    });
    
    splide.mount();
  });
</script>
